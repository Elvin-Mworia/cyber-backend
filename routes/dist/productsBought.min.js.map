{"version":3,"sources":["productsBought.js"],"names":["mysql","require","router","Router","host","password","db","post","req","res","body","user","list","map","a","push","id","console","log","connect","err","forEach","query","JSON","parse","stringify","lis","concat","close","json","module","exports"],"mappings":"aAAA,IAAMA,MAAMC,QAAQ,UACdC,OAAOD,QAAQ,WAAWE,SAD1BH,GAAKA,MAACC,iBAAZ,CAGIG,KAAM,YAFJF,KAAAA,YAIFG,SAAS,YAHPC,SAAQ,SAAkBJ,OAAhCK,KAAA,IAAA,SAAAC,EAAAC,GASAP,IAAOK,EAAPC,EAAgBE,KAAAC,KAACH,SAGTI,EAAK,GACTJ,EAAIE,KAAKE,KAAKC,IAAI,SAAAC,GACVF,EAAJG,KAAAD,EAAAE,MAEJC,QAAQC,IAAIP,GACZM,QAAQC,IAAIN,GACVN,GAACa,QAAQ,SAAAC,GACJA,GAAHA,EAAQ,MAAAA,EACRH,QAAYC,IAAA,wBAGhB,IACAN,EAAKS,QAAU,SAAAP,GACbR,GAAGgB,MAAHhB,+DAAAA,OAAAK,EAAAL,OAAAA,OAAwEK,EAAxEL,MAAA,SAAAc,EAAAX,GACG,GAAGW,EAAK,MAAMA,MAGhB,MAAMA,GACLH,QAAYC,IAAA,wBAPhB,QAWIZ,GAAGc,MAAI,SAAAA,GAAE,GAAAA,EAAA,MAAAA,IAAUH,QAAAC,IAAA,uDAevBZ,OAAGa,IAAAA,QAAQ,SAAAX,EAACY,GACR,IAAGA,EAAHG,KAAQC,MAAAD,KAAAE,UAAAjB,EAAAE,KAAAC,OACRM,QAAQC,IAAIJ,GAFhBR,GAAGa,QAAQ,SAACC,GAKT,GAAAA,EAAA,MAAAA,EACGM,QAAOR,IAACI,wBAGjB,IACGL,IAAAA,EAAAX,GAAYgB,MAAZ,4DAAAK,OAAAb,EAAA,MALAG,QAQGC,IAAAQ,GACFpB,QAAGsB,IAAMnB,EAAAoB,KAACT,IACV,MAAAA,GAEAH,QAHAC,IAAA,wBALJ,QAYDY,GAAOC,MAAP,SAAAX,GANK,GAAGA,EAAK,MAAMA,IAGfH,QAAQC,IAAI,wDAGhBY,OAAOC,QAAU7B","file":"productsBought.min.js","sourcesContent":["const mysql=require('mysql2');\r\nconst router=require('express').Router();\r\nconst db=mysql.createConnection({\r\n    host: 'localhost',\r\n    user:\"angerfist\",\r\n    password:\"9662@#$%&\",\r\n    database: 'blog'\r\n\r\n\r\n});\r\n\r\nrouter.post(\"/\",(req,res)=>{\r\n    const user=req.body.user.username;\r\n\r\n    var list=[];\r\n    req.body.list.map((a)=>{\r\n        list.push(a.id);\r\n    });\r\n    console.log(user);\r\n    console.log(list);\r\n    db.connect((err)=>{\r\n        if(err) throw err;\r\n        console.log(\"connected to db...\");\r\n        \r\n    })\r\n    try{\r\n    list.forEach(  (a)=>{\r\n      db.query(`insert into blog.purchased (username_id,product_id) values(\"${user}\",\"${a}\")`,(err,res)=>{\r\n         if(err) throw err;\r\n         \r\n     });\r\n    })}catch(err){\r\n        console.log(\"something went wrong\");\r\n        \r\n    }finally{\r\n        db.close((err)=>{\r\n        if(err){ throw err};\r\n        \r\n       }); \r\n       console.log(\"finished updating from db and safely exiting....\");\r\n   } \r\n   \r\n    \r\n\r\n\r\n})\r\n\r\nrouter.get(\"/user\",(req,res)=>{\r\n    const a=JSON.parse(JSON.stringify(req.body.user));\r\n    console.log(a);\r\n\r\n    db.connect((err)=>{\r\n        if(err) throw err;\r\n        console.log(\"connected to db...\");\r\n         \r\n    })\r\n    try{\r\n    const lis= db.query(`select product_id from blog.purchased where username_id=\"${a}\"`);\r\n    console.log(lis);\r\n   console.log(res.json(lis));\r\n}catch(err){\r\n    console.log(\"something went wrong\");\r\n   \r\n}\r\nfinally{\r\n     db.close((err)=>{\r\n     if(err) throw err;\r\n     \r\n    }); \r\n    console.log(\"finished selecting from db and safely exiting....\");\r\n} \r\n})\r\nmodule.exports = router;\r\n"]}