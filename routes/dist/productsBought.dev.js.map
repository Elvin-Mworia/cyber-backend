{"version":3,"sources":["productsBought.js"],"names":["mysql","require","router","Router","db","createConnection","host","user","password","database","post","req","res","body","username","list","map","a","push","id","console","log","connect","err","forEach","query","close","get","JSON","parse","stringify","lis","json","module","exports"],"mappings":"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","sourcesContent":["const mysql=require('mysql2');\r\nconst router=require('express').Router();\r\nconst db=mysql.createConnection({\r\n    host: 'localhost',\r\n    user:\"angerfist\",\r\n    password:\"9662@#$%&\",\r\n    database: 'blog'\r\n\r\n\r\n});\r\n\r\nrouter.post(\"/\",(req,res)=>{\r\n    const user=req.body.user.username;\r\n\r\n    var list=[];\r\n    req.body.list.map((a)=>{\r\n        list.push(a.id);\r\n    });\r\n    console.log(user);\r\n    console.log(list);\r\n    db.connect((err)=>{\r\n        if(err) throw err;\r\n        console.log(\"connected to db...\");\r\n        \r\n    })\r\n    try{\r\n    list.forEach(  (a)=>{\r\n      db.query(`insert into blog.purchased (username_id,product_id) values(\"${user}\",\"${a}\")`,(err,res)=>{\r\n         if(err) throw err;\r\n         \r\n     });\r\n    })}catch(err){\r\n        console.log(\"something went wrong\");\r\n        \r\n    }finally{\r\n        db.close((err)=>{\r\n        if(err){ throw err};\r\n        \r\n       }); \r\n       console.log(\"finished updating from db and safely exiting....\");\r\n   } \r\n   \r\n    \r\n\r\n\r\n})\r\n\r\nrouter.get(\"/user\",(req,res)=>{\r\n    const a=JSON.parse(JSON.stringify(req.body.user));\r\n    console.log(a);\r\n\r\n    db.connect((err)=>{\r\n        if(err) throw err;\r\n        console.log(\"connected to db...\");\r\n         \r\n    })\r\n    try{\r\n    const lis= db.query(`select product_id from blog.purchased where username_id=\"${a}\"`);\r\n    console.log(lis);\r\n   console.log(res.json(lis));\r\n}catch(err){\r\n    console.log(\"something went wrong\");\r\n   \r\n}\r\nfinally{\r\n     db.close((err)=>{\r\n     if(err) throw err;\r\n     \r\n    }); \r\n    console.log(\"finished selecting from db and safely exiting....\");\r\n} \r\n})\r\nmodule.exports = router;\r\n"],"file":"productsBought.dev.js"}